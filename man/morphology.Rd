% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/morph.R
\name{morphology}
\alias{morphology}
\title{Morphological operations (grayscale or RGB)}
\usage{
morphology(
  nr,
  ksize = c(2, 2, 2),
  ktype = c(0, 1, 2),
  mode = c(0, 1, 2, 3, 4, 5, 6, 7),
  border = c(3, 4, 0, 1, 2),
  iterations = 1,
  alphasync = FALSE,
  use_rgb = TRUE,
  anchor = c(-1, -1)
)
}
\arguments{
\item{nr}{A \code{nativeRaster} object.}

\item{ksize}{An integer vector specifying kernel size(s).
\itemize{
\item Length 1 (grayscale mode): kernel radius.
\item Length 3 (RGB mode): per-channel kernel radii.
Must be non-negative.
}}

\item{ktype}{An integer scalar selecting the structuring element shape.
One of \verb{0, 1, 2}, corresponding to OpenCV kernel types.}

\item{mode}{An integer scalar selecting the morphological operation.
One of \verb{0–7}, mapped to OpenCV operation modes (\code{morphologyEx} operations).}

\item{border}{An integer scalar selecting the border-handling mode.
One of \verb{0–4}, corresponding to OpenCV's border modes.}

\item{iterations}{An integer scalar giving the number of repetitions of the
operation. Must be grater than 0.}

\item{alphasync}{A logical scalar. If \code{TRUE}, apply the morphological
operation to the alpha channel as well.}

\item{use_rgb}{A logical scalar. If \code{TRUE}, apply the operation independently
to each RGB channel; if \code{FALSE}, apply it to a grayscale image derived from
masked RGB.}

\item{anchor}{An integer vector of length 2 specifying the anchor point
(kernel origin). Use \code{c(-1, -1)} for the default centered anchor.}
}
\value{
A \code{nativeRaster} object.
}
\description{
Applies morphological image-processing operations to a \code{nativeRaster} image.
Depending on \code{use_rgb}, operations are applied either to the grayscale image
masked by the alpha channel or independently to each RGB channel with
per-channel structuring elements. Supported operations include erosion,
dilation, opening, closing, gradient, and related transforms.
}
\details{
\subsection{Kernel specification}{

The shape of the structuring element is controlled by \code{ktype}, and its size
is determined by \code{ksize}.
\itemize{
\item When \code{use_rgb = FALSE}, \code{ksize} must be a single non-negative integer.
\item When \code{use_rgb = TRUE}, \code{ksize} must be a length-3 integer vector, allowing
separate kernel sizes for the R, G, and B channels.
}

The location of the anchor (kernel origin) can be specified via \code{anchor}.
Use \code{c(-1, -1)} for the default centered anchor.
}

\subsection{Alpha handling}{

If \code{alphasync = TRUE}, the same morphological operation is applied to the
alpha channel. Otherwise, the alpha channel is preserved.
}

\subsection{Options}{

\code{ktype} corresponds to:
\enumerate{
\item cv::MORPH_RECT
\item cv::MORPH_CROSS
\item cv::MORPH_ELLIPSE
}

\code{mode} is an integer scalar in range \verb{[0, 7]} corresponding to:
\enumerate{
\item cv::MORPH_ERODE
\item cv::MORPH_DILATE
\item cv::MORPH_OPEN
\item cv::MORPH_CLOSE
\item cv::MORPH_GRADIENT
\item cv::MORPH_TOPHAT
\item cv::MORPH_BLACKHAT
\item cv::MORPH_HITMISS
}

\code{border} corresponds to:
\enumerate{
\item cv::BORDER_CONSTANT
\item cv::BORDER_REPLICATE
\item cv::BORDER_REFLECT
\item cv::BORDER_REFLECT_101
\item cv::BORDER_ISOLATED
}
}
}
