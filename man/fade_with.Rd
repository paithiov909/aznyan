% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fade.R
\name{fade_with}
\alias{fade_with}
\title{Fade pixels based on a mask image}
\usage{
fade_with(
  nr,
  mask = nr,
  with = c("luma", "hue", "luminance", "saturation"),
  range = NULL,
  invert = FALSE
)
}
\arguments{
\item{nr}{A \code{nativeRaster} object.}

\item{mask}{A \code{nativeRaster} object of the same dimensions as \code{nr}. Used as the
source for computing fade factors.}

\item{with}{A character string specifying which channel of the mask image is
used to compute the fade factor. One of:
\itemize{
\item luma: Luma computed from RGB values using weights \code{c(0.299, 0.587, 0.114)}.
\item hue: Hue component of the mask image in the HLS color space.
\item luminance: Luminance (L) component of the mask image in the HLS color space.
\item saturation: Saturation (S) component of the mask image in the HLS color space.
}}

\item{range}{An optional numeric vector of length 2. If specified, the fade
factor is binarized so that only values within the given range are kept.
Pixels outside the range become fully transparent.}

\item{invert}{A logical scalar.
If \code{TRUE}, the mask image is inverted before computing the fade factor.}
}
\value{
A \code{nativeRaster} object.
}
\description{
Fades pixels of an image by modifying its alpha channel according to
values derived from a mask image.

The mask image is first converted into a scalar fade factor, depending on
the selected channel specified by \code{with}. This fade factor is then multiplied
with the existing alpha channel of \code{nr}. The RGB channels of \code{nr} are not
modified.
}
\details{
The fade factor is always normalized to the range \verb{[0, 1]} and is applied
by multiplying the existing alpha channel of \code{nr}. This means that already
transparent pixels remain transparent, and fully opaque pixels can only
become more transparent.

This function does not modify RGB values. If you need to adjust RGB values
of transparent pixels (for example, to avoid color fringes before compositing),
consider using \code{set_matte()}.
}
